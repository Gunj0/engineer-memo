# ネットワーク

## Region

- 世界各国のデータセンターの地理的分類
  - リージョンごとに利用できるサービスや価格が異なる
- 主なリージョン
  - us-east-01: 米国(バージニア北部)
    - 最も古く、サービスが豊富
  - us-west-02: 米国(オレゴン)
    - 安い検証用
  - ap-northeast-01: アジアパシフィック(東京)
    - 東京からだと応答速度が早いため本番環境でよく使われる
  - ap-northeast-03: アジアパシフィック(大阪)
    - 東京リージョンの災害対策(DR)用に使われることが多い

## AZ: Availability Zone

- リージョン内に複数存在するデータセンター群
- 物理的に離れた場所に存在し、複数の AZ を利用することで可用性を高められる

## VPC: Virtual Private Cloud

- AWS 上に構築する仮想ネットワーク
  - 他のユーザーから隔離された論理的に独立したネットワーク
  - 基本的には無料(NAT ゲートウェイなどを使わなければ)
  - Regionごとにデフォルトで 1 つ作成される

### 設定方法

- VPC
  - VPC > VPC を作成
    - IPv4 CIDR: Classless Inter Domain Routing
      - 例: 10.0.0.0/16
        - 前半 16bit(10.0) はネットワーク部
        - 後半 16bit(0.0) はホスト部, 65,536 の IP アドレス設置可
- Public Subnet
  - VPC > サブネット > サブネットを作成
    - IPv4 サブネット CIDR ブロック
      - 例: 10.0.10.0/24
        - 前半 24bit(10.0.10) はネットワーク部
        - 後半 8bit(0)はホスト部, 256 の IP アドレス設置可
    - VPC に紐づける
- Private Subnet
  - VPC > サブネット > サブネットを作成
    - IPv4 サブネット CIDR ブロック
      - 例: 10.0.20.0/24
        - 前半 24bit(10.0.20) はネットワーク部
        - 後半 8bit(0)はホスト部, 256 の IP アドレス設置可
    - VPC に紐づける
- Internet Gateway
  - VPC > インターネットゲートウェイ > インターネットゲートウェイを作成
  - アクション > VPC にアタッチ
- Route Table
  - VPC > ルートテーブル > ルートテーブルを作成
    - VPC に紐づける
  - アクション > サブネットの関連付けを編集
    - Public Subnet を選択して「関連付けを保存」
  - ルート > ルートを編集 > ルートを追加
    - 0.0.0.0/0 インターネットゲートウェイ > 作成したゲートウェイ
      - VPC 内から 10.0.0.0/16 への通信は VPC 内へ(デフォルト)
      - それ以外(0.0.0.0/0)の通信はインターネットへ接続するようになる

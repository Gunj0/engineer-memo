# 構造に関するパターン

## Composite: 階層構造

### 公式説明

部分-全体階層を表現するために、オブジェクトを木構造に組み立てる。
Composite パターンにより、クライアントは、
個々のオブジェクトとオブジェクトを合成したものを一様に扱うことができるようになる。

### 解説

- 基本
  - 親と子を同一視して階層構造を実装する
  - 容器と中身を同一視して再帰的な構造の扱いを統一にする
- 詳細
  - `Execute` メソッドを持つ部品クラスを Interface/抽象クラスで定義する
  - 部品クラスを実装/継承する `Folder` クラス と `File` クラスを定義する
  - Folder クラスには部品クラスの `List` をもたせ、`Add` メソッドで `List` に部品を追加できるようにする
  - リスコフの置換原則に従い、部品クラスと`File` クラスにも `Add` メソッドをもたせ、例外を投げるようにする
  - `GetChildren`メソッド等を `Folder` クラスに作り`List` を返すようにしておくことでクライアント側で再帰的な処理ができる
  - `Folder` クラス と `File` クラス以外にも、バリエーションを作ることもできる
- メリット
  - 親と子を同一視するのでクライアント側が簡潔になる
  - 階層が増えても変更が楽になる
